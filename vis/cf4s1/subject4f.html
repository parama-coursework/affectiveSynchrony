<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<!--Load Libraries-->
<script type="text/javascript" src="../libs/jquery.1.7.2.min.js"></script>
<script src="../libs/jquery-ui.1.8.15.min.js"></script>
<script type="text/javascript" src="../libs/d3.v2.min.js"></script>
<script type="text/javascript" src="../libs/rickshaw.min.js"></script>
<script type="text/javascript" src="../libs/extensions.js"></script>

<!--Load Scripts-->
<script type="text/javascript" src="../parseData.js"></script>
<script type="text/javascript" src="../libs/jquery.easing.js"></script>
<script type="text/javascript" src="../libs/jquery.collapse.js"></script>
<script type="text/javascript">
	
	$(function(){
		
		$('#collapser').jqcollapse({
		   slide: true,
		   speed: 1000,
		   easing: 'easeOutCubic'
		});
		
	});
	
</script>

<!--Load Data-->
<script type="text/javascript" src="../../data/analysis/json/cf4s1.js"></script>


<!--Load Styles-->
<link rel="stylesheet" href="../../styles/themes/spacelab/bootstrap.min.css"/>
<link rel="stylesheet/less" href="../../styles/themes/spacelab/bootswatch.less"/>
<link rel="stylesheet/less" href="../../styles/themes/spacelab/variables.less"/>
<link rel="stylesheet/less" href="../../styles/less-1.3.0.min.less"/>
<link type="text/css" rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css"/>
<link rel="stylesheet" href="../../styles/contentpage.css"/>
<link rel="stylesheet" href="../libs/rickshaw.min.css"/>
<link type="text/css" rel="stylesheet" href="../../styles/vis/graph.css"/>
<link type="text/css" rel="stylesheet" href="../../styles/vis/detail.css"/>
<link type="text/css" rel="stylesheet" href="../../styles/vis/legend.css"/>
<link type="text/css" rel="stylesheet" href="../../styles/vis/extensions.css"/>

<link type="text/css" rel="stylesheet" href="../../styles/vis/extra.css"/>

<style>
	/*ul { margin: 0; padding: 0; }
	ul li { margin: 10px 0 10px 25px; padding: 0; list-style: none; }*/
	
	.jqcNode { font-weight: bold; color: #4183C4; }
	
</style>

<title>Visualizations</title>

<!--[if lte IE 7]>
<style>
.content { margin-right: -1px; } /* this 1px negative margin can be placed on any of the columns in this layout with the same corrective effect. */
ul.nav a { zoom: 1; }  /* the zoom property gives IE the hasLayout trigger it needs to correct extra whiltespace between the links */
</style>
<![endif]-->

<style>
</style>


</head>

<body>

<div class="navbar">
	<div class="navbar-inner">
		<div class="container">
			<a class="brand" href="Index.html">AFFECTIVE SYNCHRONY</a>
            <ul class="nav">
			  <li><a href="Introduction.html">INTRO</a></li>
		      <li><a href="Background.html">BACKGROUND</a></li>
		      <li><a href="DataSet.html">DATA</a></li>
		      <li><a href="Methods.html">METHODS</a></li>
		      <li><a href="Investigations.html">INVESTIGATIONS</a></li>
			  <li><a href="Discussion.html">DISCUSSION</a></li>
		      <li><a href="FutureWork.html">FUTURE WORK</a></li>
		      <li><a href="References.html">REFERENCES</a></li>
		      <li><a href="Acknowledgements.html">THANKS</a></li>
			</ul>
		</div>
	</div>
</div>


<div class="container-fluid">
      <div class="row-fluid"><!--Row 1: Sidebar Navigation, Title, Summary-->
        
		<!--Sidebar Navigation-->
		<div class="span2">          
		<!--<div class="well">
            <ul class="nav nav-list">
              <li class="nav-header">Sidebar</li>
		      <li><a href="Visualizations.html">VISUALIZATIONS</a></li>
			  <ul class="nav nav-list">
			  	<li class="active"><a href="../vis/cf4s1/cf4s1.html">SUBJECT 4</a></li>
			  </ul>
            </ul>
          </div>
		-->
		
		<div class="well">
            <ul class="nav nav-list">
			  <li><a href="Subject4.html">Visualizations</a></li>
			<ul class="nav nav-list">
		      <li><a href="Subject4.html">Subject 4</a></li>
			  <li><a href="Subject10.html">Subject 10</a></li>
			  <li>Subject 13</a></li>
				<ul class="nav nav-list">
			  		<li><a href="Subject4.html">Session 1</a></li>
					<li><a href="Subject10.html">Session 5.1</a></li>
					<li><a href="Subject10.html">Session 5.2</a></li>
				</ul>
			  <li><a href="Subject 14.html">Subject 14</a></li>
            </ul>
          </div>
		
        </div><!--/sidebar navigation span2-->	
			
			
		<!---Title and Summary Column-->
		<div class="span8">
			
			<!--Title Breadcrumb Bar Row-->
			<div class="row-fluid">
				
				<ul class="breadcrumb">
				  <li><b>Subject 4</b><span class="divider">:</span>
				  </li>
				  <li class="active"><b>Session 1</b></li>
				</ul>
			</div>
			
			<!--Summary/Description Row-->
			<div class="row-fluid">
				
					<div class="well">
						<ul id="description" style="list-style-type:none;padding:0;margin:0;"> 
							<li><b>Summary: </b>Check time series to view them on the chart. Axes will update for the remaining series.
							</li>
							<li><b>Duration: </b>Check time series to view them on the chart. Axes will update for the remaining series.
							</li>
							<li><b>Analysis: </b>Check time series to view them on the chart. Axes will update for the remaining series.
							</li>
						</ul>
					</div><!--/well-->	
			</div><!--/row-fluid-->	
			
		</div><!--/span 8 title and summary column-->	
			
			<!--Third empty span 2 column-->
			<div class="span2"></div>
	</div><!-- end sidebar title summary row-->
	
	<div class="row-fluid"><!--ROW 2: Instructions, eda charts, tools-->

			<!--Instructional span 2 column-->
			<div class="span2">
				<div class="well">
				<p> The following plots allow you, the user, to explore the data set. Click to expand option descriptions.</p>
				<ul id="collapser"> 
					<li><b>Select Series</b>
						<ul style="list-style-type:none;padding:0;margin:0;">
							<li>Check time series to view them on the chart. Axes will update for the remaining series.</li>
						</ul>
					</li>
					<li><b> Reorder Series</b>
						<ul>
							<li>Drag and drop the time series to reorder them</li>
						</ul>
					</li>
					<li><b>Highlight Series</b>
						<ul>
							<li>Hovering over the name of a specific time series will highlight it while greying out other time series.</li>
						</ul>
					</li>
					<li><b>Select Chart Type</b>
						<ul>
							<li>Controls and toggles allow you to control which data you are looking at, and allow for stacked charts, line charts, bar chart, and scatter plot views of the data.</li>
						</ul>
					</li>
					<li><b>Interpolation</b>
						<ul>
							<li>The view also allows you to switch between different types of interpolation between time points, options being cardinal, linear, and stepped interpolation.</li>
						</ul>
					</li>
					<li><b>Annotations</b>
						<ul>
							<li>Hover over the grey dots that lie between the chart and the slider bar to see annotations</li>
						</ul>
					</li>
					<li><b>Zoom</b>
						<ul>
							<li>Use the sliders to zoom in to a time series, and mouse over grey dots along the bottom of the time series for annotations.</li>
						</ul>
					</li>
				</ul>
				</div><!--/well-->	
			</div><!--/span2-->	
				
			
			<!---Raw EDA Charts-->
			
				<!---Time Series-->
				<div class="span8">
					<div id="chart_container">
						
						<h4>RAW EDA VALUES</h4>
						<div id="chart"></div>
						<div id="timeline"></div>
						<div id="slider"></div>
						<div id="chartNotes">
						<p>This chart depics the raw and filtered EDA values for the child and occupational therapist during the time segment indicated. It defaults to a <b>stacked chart</b> in order to orient the viewer to how many series are present, and what the range of values amongst the time series in the chart. Engagement vs Non-Engagement periods are indicated with a grey backdrop. <b>Stream Graphs</b> can be used to get a deeper understanding of the difference in magnitude of values between two points while taking the focus off the explicit values of the points. In this specific case, we see that the general value readings for the child were much higher when we examine EDAs on the streamgraph. </p>
						</div>
					</div>
				</div>
			
				<!---Control Panel-->
				<div class="span2">
				
					<form id="side_panel">
						<h4>SETTINGS</h4>
						<section><div id="legend"></div></section>
						<section>
							<div id="renderer_form" class="toggler">
								<input type="radio" name="renderer" id="area" value="area" checked>
								<label for="area">area</label>
								<input type="radio" name="renderer" id="bar" value="bar">
								<label for="bar">bar</label>
								<input type="radio" name="renderer" id="line" value="line">
								<label for="line">line</label>
								<input type="radio" name="renderer" id="scatter" value="scatterplot">
								<label for="scatter">scatter</label>
							</div>
						</section>
						<section>
							<div id="offset_form">
								<label for="stack">
									<input type="radio" name="offset" id="stack" value="zero" checked>
									<span>stack</span>
								</label>
								<label for="stream">
									<input type="radio" name="offset" id="stream" value="wiggle">
									<span>stream</span>
								</label>
								<label for="pct">
									<input type="radio" name="offset" id="pct" value="expand">
									<span>percent</span>
								</label>
								<label for="value">
									<input type="radio" name="offset" id="value" value="value">
									<span>value</span>
								</label>
							</div>
							<div id="interpolation_form">
								<label for="cardinal">
									<input type="radio" name="interpolation" id="cardinal" value="cardinal" checked>
									<span>cardinal</span>
								</label>
								<label for="linear">
									<input type="radio" name="interpolation" id="linear" value="linear">
									<span>linear</span>
								</label>
								<label for="step">
									<input type="radio" name="interpolation" id="step" value="step-after">
									<span>step</span>
								</label>
							</div>
						</section>
						<!--<section>
							<h6>Smoothing</h6>
							<div id="smoother"></div>
						</section>-->
						<section></section>
					</form>
				
				</div><!--/control panel 1 span 2-->	
			
			</div><!-- end row-fluid -->
			
		<!--ROW 3: PEAKING, CORRELATION, ETC-->
		
			<div class="row-fluid">
			
			<div class="span2"></div>
			
			<!---Time Series-->
			<div class="span8">
				<div id="second_chart_container">
					
					<h4>CORRELATION VALUES</h4>
					<div id="second_chart"></div>
					<div id="second_timeline"></div>
					<div id="second_slider"></div>
					<div id="second_chartNotes">
					<p>This chart depics the raw and filtered EDA values for the child and occupational therapist during the time segment indicated. It defaults to a <b>stacked chart</b> in order to orient the viewer to how many series are present, and what the range of values amongst the time series in the chart. Engagement vs Non-Engagement periods are indicated with a grey backdrop. <b>Stream Graphs</b> can be used to get a deeper understanding of the difference in magnitude of values between two points while taking the focus off the explicit values of the points. In this specific case, we see that the general value readings for the child were much higher when we examine EDAs on the streamgraph. </p>
					</div>
				</div>
			</div>
		
			<!---Control Panel-->
			<div class="span2">
			
				<form id="second_side_panel">
					<h4>SETTINGS</h4>
					<section><div id="second_legend"></div></section>
					<section>
						<div id="second_renderer_form" class="second_toggler">
							<input type="radio" name="renderer" id="area" value="area" checked>
							<label for="area">area</label>
							<input type="radio" name="controls" id="bar" value="bar">
							<label for="bar">bar</label>
							<input type="radio" name="renderer" id="second_line" value="line">
							<label for="line">line</label>
							<input type="radio" name="renderer" id="scatter" value="scatterplot">
							<label for="scatter">scatter</label>
						</div>
					</section>
					<section>
						<div id="second_offset_form">
							<label for="stack">
								<input type="radio" name="offset" id="stack" value="zero" checked>
								<span>stack</span>
							</label>
							<label for="stream">
								<input type="radio" name="offset" id="stream" value="wiggle">
								<span>stream</span>
							</label>
							<label for="pct">
								<input type="radio" name="offset" id="pct" value="expand">
								<span>percent</span>
							</label>
							<label for="value">
								<input type="radio" name="offset" id="value" value="value">
								<span>value</span>
							</label>
						</div>
						<div id="second_interpolation_form">
							<label for="cardinal">
								<input type="radio" name="interpolation" id="cardinal" value="cardinal" checked>
								<span>cardinal</span>
							</label>
							<label for="linear">
								<input type="radio" name="interpolation" id="linear" value="linear">
								<span>linear</span>
							</label>
							<label for="step">
								<input type="radio" name="interpolation" id="step" value="step-after">
								<span>step</span>
							</label>
						</div>
					</section>
					<!--<section>
						<h6>Smoothing</h6>
						<div id="second_smoother"></div>
					</section>-->
					<section></section>
				</form>
			
			</div><!--/control panel 1 span 2-->
				
			</div>
			

			<!-- Footer Row -->
			<div class="row-fluid">
			
				<div class="span2"></div>
				
				<div class="span8">
					<div class="footer" style="text-align:center">
						<p>Parama Pal | MAS.630 | Fall 2011</p>
					</div>
				</div>
				
				<div class="span2"></div>
				
			</div>
			
		</div><!-- end span -->
		</div>
		
		<script>
/////////////////////////// JAVASCRIPT STARTS HERE ///////////////////////////
		//first raw eda plot
		
		
		var seriesData = [ [], [], [], [], [], [], [], [], [] ];
		var random = new Rickshaw.Fixtures.RandomData(1524);

		for (var i = 0; i < 1524; i++) {
			random.addData(seriesData);
		}
		
		seriesData[0]=convertArrayCoordsWithTime(cf4s1.ceda);
		seriesData[1]=convertArrayCoordsWithTime(cf4s1.oeda);
		seriesData[2]=convertArrayCoordsWithTime(cf4s1.cbp);
		seriesData[3]=convertArrayCoordsWithTime(cf4s1.obp);
		seriesData[4]=convertArrayCoordsWithTime(cf4s1.coc);
		seriesData[5]=convertArrayCoordsWithTime(cf4s1.cwc);

		var palette = new Rickshaw.Color.Palette( { scheme: 'spectrum14' } );
		//var palette = d3.scale.category10();

		// instantiate our graph!
		widthB = $("div.span8"); //figure out what div to access to get desired width
		paddingBox = 10;
		widthBox = $(widthB).width()-paddingBox;

		var graph = new Rickshaw.Graph( {
			element: document.getElementById("chart"),
			width: widthBox,
			//height: 500,
			renderer: 'area',
			stroke: true,
			series: [
				{
					color: palette.color(),
					data: seriesData[3],
					name: 'Filtered OT EDA'
				}, {
					color: palette.color(),
					data: seriesData[2],
					name: 'Filtered Child EDA'
				}, {
					color: palette.color(),
					data: seriesData[1],
					name: 'Raw OT EDA'
				}, {
					color: palette.color(),
					data: seriesData[0],
					name: 'Raw Child EDA'
				}
			]
		} );

		graph.render();

		var slider = new Rickshaw.Graph.RangeSlider( {
			graph: graph,
			element: $('#slider')
		} );

		var hoverDetail = new Rickshaw.Graph.HoverDetail( {
			graph: graph
		} );

		var annotator = new Rickshaw.Graph.Annotate( {
			graph: graph,
			element: document.getElementById('timeline')
		} );

		var legend = new Rickshaw.Graph.Legend( {
			graph: graph,
			element: document.getElementById('legend')

		} );

		var shelving = new Rickshaw.Graph.Behavior.Series.Toggle( {
			graph: graph,
			legend: legend
		} );

		var order = new Rickshaw.Graph.Behavior.Series.Order( {
			graph: graph,
			legend: legend
		} );

		var highlighter = new Rickshaw.Graph.Behavior.Series.Highlight( {
			graph: graph,
			legend: legend
		} );

		//var smoother = new Rickshaw.Graph.Smoother( {
		//	graph: graph,
		//	element: $('#smoother')
		//} );

		var ticksTreatment = 'glow';

		var xAxis = new Rickshaw.Graph.Axis.Time( {
			graph: graph,
			ticksTreatment: ticksTreatment
		} );

		xAxis.render();

		var yAxis = new Rickshaw.Graph.Axis.Y( {
			graph: graph,
			tickFormat: Rickshaw.Fixtures.Number.formatKMBT,
			ticksTreatment: ticksTreatment
		} );

		yAxis.render();


		var controls = new RenderControls( {
			element: document.querySelector('form'),
			graph: graph
		} );

		// add some data every so often

		var messages = [
			"Changed home page welcome message",
			"Minified JS and CSS",
			"Changed button color from blue to green",
			"Refactored SQL query to use indexed columns",
			"Added additional logging for debugging",
			"Fixed typo",
			"Rewrite conditional logic for clarity",
			"Added documentation for new methods"
		];

		//  setInterval( function() {
		//	  random.addData(seriesData);
		//	  graph.update();

		//}, 3000 );

		function addAnnotation(force) {
			if (messages.length > 0 && (force || Math.random() >= 0.95)) {
				annotator.add(seriesData[2][seriesData[2].length-1].x, messages.shift());
			}
		}

		addAnnotation(true);
		
		//setTimeout( function() { setInterval( addAnnotation, 6000 ) }, 6000 );
		
		
		
/////////////////// CORRELATION AND PEAK FREQUENCY GRAPH STARTS HERE

var second_seriesData = [ [], [], [], [], [], [], [], [], [] ];
var random = new Rickshaw.Fixtures.RandomData(1524);

for (var i = 0; i < 1524; i++) {
	random.addData(second_seriesData);
}

second_seriesData[0]=convertArrayCoordsWithTime(cf4s1.cpf);
second_seriesData[1]=convertArrayCoordsWithTime(cf4s1.opf);
second_seriesData[2]=convertArrayCoordsWithTime(cf4s1.cwc);
second_seriesData[3]=convertArrayCoordsWithTime(cf4s1.coc);

var second_palette = new Rickshaw.Color.Palette( { scheme: 'spectrum14' } );
//var palette = d3.scale.category10();

// instantiate our graph!
widthB = $("div.span8"); //figure out what div to access to get desired width
paddingBox = 10;
widthBox = $(widthB).width()-paddingBox;

var second_graph = new Rickshaw.Graph( {
	element: document.getElementById("second_chart"),
	width: widthBox,
	//height: 500,*/
	//renderer: 'area',
	stroke: true,
	series: [
		{
			color: second_palette.color(),
			data: second_seriesData[3],
			name: 'Correlation with Moving Window'
		}, {
			color: second_palette.color(),
			data: second_seriesData[2],
			name: 'Cumulative Correlation'
		}
	]
} );

second_graph.render();

var second_slider = new Rickshaw.Graph.RangeSlider( {
	graph: second_graph,
	element: $('#second_slider')
} );

var second_hoverDetail = new Rickshaw.Graph.HoverDetail( {
	graph: second_graph
} );

var second_annotator = new Rickshaw.Graph.Annotate( {
	graph: second_graph,
	element: document.getElementById('second_timeline')
} );

var second_legend = new Rickshaw.Graph.Legend( {
	graph: second_graph,
	element: document.getElementById('second_legend')

} );

var second_shelving = new Rickshaw.Graph.Behavior.Series.Toggle( {
	graph: second_graph,
	legend: second_legend
} );


var second_order = new Rickshaw.Graph.Behavior.Series.Order( {
	graph: second_graph,
	legend: second_legend
} );

var second_highlighter = new Rickshaw.Graph.Behavior.Series.Highlight( {
	graph: second_graph,
	legend: second_legend
} );

/*var smoother = new Rickshaw.Graph.Smoother( {
	graph: graph,
	element: $('#smoother')
} );*/

var second_ticksTreatment = 'glow';

var second_xAxis = new Rickshaw.Graph.Axis.Time( {
	graph: second_graph,
	ticksTreatment: second_ticksTreatment
} );

second_xAxis.render();

var second_yAxis = new Rickshaw.Graph.Axis.Y( {
	graph: second_graph,
	tickFormat: Rickshaw.Fixtures.Number.formatKMBT,
	ticksTreatment: second_ticksTreatment
} );

second_yAxis.render();

var second_controls = new RenderControls( {
	element: document.querySelector("#second_side_panel"),
	graph: second_graph
} );

// add some data every so often

var messages = [
	"Changed home page welcome message",
	"Minified JS and CSS",
	"Changed button color from blue to green",
	"Refactored SQL query to use indexed columns",
	"Added additional logging for debugging",
	"Fixed typo",
	"Rewrite conditional logic for clarity",
	"Added documentation for new methods"
];

/*setInterval( function() {
	random.addData(seriesData);
	graph.update();

}, 3000 );*/

function second_addAnnotation(force) {
	if (messages.length > 0 && (force || Math.random() >= 0.95)) {
		second_annotator.add(second_seriesData[2][second_seriesData[2].length-1].x, messages.shift());
	}
}

second_addAnnotation(true);
		</script>
		
		
		
		
	</body>
</html>